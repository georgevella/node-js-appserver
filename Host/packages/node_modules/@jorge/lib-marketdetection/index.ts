export * from "./lib/interfaces";
export * from "./lib/MarketDetectionService";
export * from "./lib/symbols";
export * from "./lib/middleware";

import { IModule, registerModule, ContainerConfiguration } from "@jorge/lib-di";
import { TMarketDetectionService, TMarketDetector, TMarketDetectionMiddleware } from "./lib/symbols";
import { MarketDetectionService } from "./lib/MarketDetectionService";
import { RequestIpMarketDetector } from "./lib/detectors";
import { MarketDetectionMiddleware } from "./lib/middleware"

class MarketDetectionModule implements IModule {
  registerServices(container: ContainerConfiguration): void {
    container.register(TMarketDetectionService, MarketDetectionService);
    container.registerCollection(TMarketDetector, RequestIpMarketDetector)
    container.register(TMarketDetectionMiddleware, MarketDetectionMiddleware);
  }
}

console.debug("marketdetection: registering modules");
registerModule(new MarketDetectionModule());