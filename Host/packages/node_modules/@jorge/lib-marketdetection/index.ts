export * from "./lib/interfaces";
export * from "./lib/MarketDetectionService";
export * from "./lib/symbols";

import { IModule, registerModule, ContainerConfiguration } from "@jorge/lib-di";
import { TMarketDetectionService, TMarketDetector } from "./lib/symbols";
import { MarketDetectionService } from "./lib/MarketDetectionService";
import { RequestIpMarketDetector } from "./lib/detectors";

class MarketDetectionModule implements IModule {
  registerServices(container: ContainerConfiguration): void {
    container.register(TMarketDetectionService, MarketDetectionService);
    container.registerCollection(TMarketDetector, RequestIpMarketDetector)
  }
}

console.debug("marketdetection: registering modules");
registerModule(new MarketDetectionModule());