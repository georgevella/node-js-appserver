import { ServiceProvider, IServiceProvider } from "@jorge/lib-di";
import { IContainer } from "container-ioc";
import "reflect-metadata";
import { Request } from "express";

export function registerServiceProvider(
  req: Request,
  container: IContainer
): void {
  Reflect.defineMetadata("container", new ServiceProvider(container), req);
}

export function getCurrentContainer(req: Request): IServiceProvider {
  let serviceProvider: IServiceProvider = Reflect.getMetadata("container", req);

  return serviceProvider;
}
